function die {
    msg=$1
    status=$2
    echo $msg
    exit $status
}

declare -gA mux2id
mux2id=(
        [amsterdam]=1
        [atlanta]=2
        [bangalore]=3
        [chicago]=4
        [dallas]=5
        [delhi]=6
        [frankfurt]=7
        [johannesburg]=8
        [london]=9
        [losangelas]=10
        [madrid]=11
        [melbourne]=12
        [mexico]=13
        [miami]=14
        [mumbai]=15
        [newyork]=16
        [osaka]=17
        [paris]=18
        [saopaulo]=19
        [seattle]=20
        [seoul]=21
        [silicon]=22
        [singapore]=23
        [stockholm]=24
        [sydney]=25
        [tokyo]=26
        [toronto]=27
        [warsaw]=28
)

declare -ga prefixes
prefixes=(
    184.164.224.0/24
    184.164.225.0/24
    184.164.231.0/24
    184.164.232.0/24
    184.164.234.0/24
    184.164.235.0/24
    184.164.238.0/24
    184.164.239.0/24
    184.164.240.0/24
    184.164.242.0/24
    184.164.243.0/24
    184.164.244.0/24
    184.164.245.0/24
    184.164.246.0/24
    184.164.247.0/24
    184.164.248.0/24
    184.164.249.0/24
    184.164.250.0/24
    184.164.251.0/24
    184.164.254.0/24
)

declare -gA prefix2idx
prefix2idx=(
    [184.164.224.0/24]=1
    [184.164.225.0/24]=2
    [184.164.231.0/24]=3
    [184.164.232.0/24]=4
    [184.164.234.0/24]=5
    [184.164.235.0/24]=6
    [184.164.238.0/24]=7
    [184.164.239.0/24]=8
    [184.164.240.0/24]=9
    [184.164.242.0/24]=10
    [184.164.243.0/24]=11
    [184.164.244.0/24]=12
    [184.164.245.0/24]=13
    [184.164.246.0/24]=14
    [184.164.247.0/24]=15
    [184.164.248.0/24]=16
    [184.164.249.0/24]=17
    [184.164.250.0/24]=18
    [184.164.251.0/24]=19
    [184.164.254.0/24]=20
)

declare -gA prefix2mux
prefix2mux=(
    [184.164.224.0/24]=amsterdam
    [184.164.225.0/24]=miami
    [184.164.231.0/24]=tokyo
    [184.164.232.0/24]=seattle
    [184.164.234.0/24]=amsterdam
    [184.164.235.0/24]=amsterdam
    [184.164.238.0/24]=delhi
    [184.164.239.0/24]=saopaulo
    [184.164.240.0/24]=amsterdam
    [184.164.242.0/24]=amsterdam
    [184.164.243.0/24]=amsterdam
    [184.164.244.0/24]=amsterdam
    [184.164.245.0/24]=amsterdam
    [184.164.246.0/24]=amsterdam
    [184.164.247.0/24]=tokyo
    [184.164.248.0/24]=seattle
    [184.164.249.0/24]=amsterdam
    [184.164.250.0/24]=amsterdam
    [184.164.251.0/24]=amsterdam
    [184.164.254.0/24]=tokyo
)
